<!DOCTYPE html>

<html lang="en" dir="ltr">

  <head>
   <meta charset="utf-8">
   <title>mesa de ping pong</title>
  </head>
  <body>

    <canvas id="folha" width="600" height="500"></canvas>

    <script>
     window.onload = function()
      {
         setInterval(executar, 1000 / 30);
      }

        var folhaDesenho = document.getElementById("folha");
        var areaDesenho = folhaDesenho.getContext("2d");
        var larguraCampo = 600;//y de cima para baixo
        var alturaCampo = 500;//x da esquerda para a direita
        var espessuraRede = 5

        var diametroBola = 10 ;

        var espessuraRaquete = 11;
        var alturaRaquete =100 ;

        var efeitoRaquete = 0.3;
        var velocidadeJogador2 = 5;



        var posicaoJogador1 = 40;
        var posicaoJogador2 = 50;
        var posicaoBolaX = posicaoBolaY = 10;
        var velociadeBolaPosicaoX = velociadeBolaPosicaoY = 5;
        var pontuacaoJogador1 = pontuacaoJogador2 = 0

        folhaDesenho.addEventListener('mousemove', function(e)
        {
          posicaoJogador1 = e.clientY - alturaRaquete / 2;
        });




        function executar ()
        {
          //campo
          areaDesenho.fillStyle = "#286047"; // cor verde
          areaDesenho.fillRect(0, 0, larguraCampo, alturaCampo);
          areaDesenho.fillStyle = "#ffffff"; // cor branca

          areaDesenho.fillRect(larguraCampo / 2 - espessuraRede / 2, 0, espessuraRede, alturaCampo);
          //desenhar a bola
          areaDesenho.fillRect(posicaoBolaX - diametroBola / 2, posicaoBolaY - diametroBola / 2, diametroBola, diametroBola);
          //raquetes
          areaDesenho.fillRect(0, posicaoJogador1, espessuraRaquete, alturaRaquete);
          areaDesenho.fillRect(larguraCampo - espessuraRaquete, posicaoJogador2, espessuraRaquete, alturaRaquete);
          //escrever a pontuação do jogador
          areaDesenho.fillText("humano - " + pontuacaoJogador1 + "pontos", 100, 100);
          areaDesenho.fillText("computador - " + pontuacaoJogador2 + "pontos", larguraCampo - 200, 100);

          posicaoBolaX = posicaoBolaX + velociadeBolaPosicaoX;
          posicaoBolaY = posicaoBolaY + velociadeBolaPosicaoY;

          // verificar lateral superior
          if (posicaoBolaY < 0 && velociadeBolaPosicaoY < 0)
          {
            velociadeBolaPosicaoY = -velociadeBolaPosicaoY;
          }
          //verificação lateral inferior
          if (posicaoBolaY > alturaCampo && velociadeBolaPosicaoY > 0)
          {
           velociadeBolaPosicaoY = -velociadeBolaPosicaoY;
          }
          //verificar se jogador 2 fez pontos
          if(posicaoBolaX < 0)
          {
            if(PosicaoBolaY > posicaoJogador1 && posicaoBolaY < posicaoJogador1 + alturaRaquete)
              //rebater a bola
              velociadeBolaPosicaoX = -velociadeBolaPosicaoX;
              var diferencaY = posicaoBolaY - (posicaoJogador1 + alturaRaquete / 2);
              velociadeBolaPosicaoY = diferencaY * efeitoRaquete;
          }
          else
          {
            // ponto jogador 2
            pontuacaoJogador2 = pontuacaoJogador2 + 1 ;

            //coloca bola no centro
            posicaoBolaX = larguraCampo / 2;
            posicaoBolaY = alturaCampo / 2 ;
            velociadeBolaPosicaoX = - velociadeBolaPosicaoX;
            velociadeBolaPosicaoY = 3;
          }

          // verificação jogador 1 fez pontos
          if(posicaoBolaX > larguraCampo)
          {
            if (posicaoBolaY > posicaoJogador2 && posicaoBolaY < posicaoJogador2 + alturaRaquete)
            //rebater a bola
            velociadeBolaPosicaoX = - velociadeBolaPosicaoX;

            var diferencaY = posicaoBolaY - (posicaoJogador2 + alturaRaquete / 2);
            velociadeBolaPosicaoY = diferencaY * efeitoRaquete;
          }
          else
          {
            //Pontos do jogador 1
            pontuacaoJogador1 = pontuacaoJogador1 + 1;

            //colocar bola no centro
            posicaoBolaX = larguraCampo / 2;
            posicaoBolaY = alturaCampo / 2 ;
            velociadeBolaPosicaoX = - velociadeBolaPosicaoX;
            velociadeBolaPosicaoY = 3;
          }
        }
        //atualizar posição do jogador 2
        if(posicaoJogador2 + alturaRaquete / 2 < posicaoBolaY) {
          posicaoJogador2 = posicaoJogador2 + velocidadeJogador2;
        } else {
          posicaoJogador2 = posicaoJogador2 - velocidadeJogador2;
        }

    </script>
  </body>
</html>
